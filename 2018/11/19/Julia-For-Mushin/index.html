<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  
  <title>Julia for Mushin | Orpheus</title>
  <meta name="description" content="This is description" />
  <meta name="keywords" content="keyword 1,keyword 2" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <link rel="shortcut icon" href="/images/favicon.ico">
  <link rel="alternate" href="/atom.xml" title="Orpheus">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="A plan to try out the Julia language.">
<meta name="keywords" content="mechanics,julia,numerical">
<meta property="og:type" content="article">
<meta property="og:title" content="Julia for Mushin">
<meta property="og:url" content="http://smanist.github.io/2018/11/19/Julia-For-Mushin/index.html">
<meta property="og:site_name" content="Orpheus">
<meta property="og:description" content="A plan to try out the Julia language.">
<meta property="og:updated_time" content="2018-11-19T21:44:12.693Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Julia for Mushin">
<meta name="twitter:description" content="A plan to try out the Julia language.">
    
  <link href="https://fonts.googleapis.com/css?family=Inconsolata|Titillium+Web" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Roboto+Mono" rel="stylesheet">
  <link href='//cdn.bootcss.com/node-waves/0.7.5/waves.min.css' rel='stylesheet'>
  <link rel="stylesheet" href="/style.css">
  
  

  <script>
    function setLoadingBarProgress(num) {
      document.getElementById('loading-bar').style.width=num+"%";
    }
  </script>
</head>

<body>
  <div id="loading-bar-wrapper">
  <div id="loading-bar"></div>
</div>


  <script>setLoadingBarProgress(20)</script> 
  <header class="l_header">
		<div class="wrapper container">
			<a class="logo flat-box" href='/' >
				Orpheus
			</a>
			<div class='menu'>
				<ul class='h-list'>
					
						<li>
							<a class='flat-box nav-home' href='/'>
								Home
							</a>
						</li>
					
						<li>
							<a class='flat-box nav-archives' href='/archives'>
								Archives
							</a>
						</li>
					
						<li>
							<a class='flat-box nav-about' href='/about'>
								About
							</a>
						</li>
					
				</ul>
				<div class='underline'></div>
			</div>
			
				<div class="m_search">
					<form name="searchform" class="form u-search-form">
						<input type="text" class="input u-search-input" placeholder="Search" />
						<span class="icon icon-search"></span>
					</form>
				</div>
			
			<ul class='switcher h-list'>
				
					<li class='s-search'><a href='javascript:void(0)'><span class="icon icon-search"></span></a></li>
				
				<li class='s-menu'><a href='javascript:void(0)'><span class="icon icon-menu"></span></a></li>
			</ul>
		</div>
		<aside class="menu-phone">
			<nav>
				
					<a href="/" class="nav-home nav">
						Home
					</a>
				
					<a href="/archives" class="nav-archives nav">
						Archives
					</a>
				
					<a href="/about" class="nav-about nav">
						About
					</a>
				
			</nav>
		</aside>
</header>

    <script>setLoadingBarProgress(40);</script>
  <div class="l_body">
    <div class='container'>
      <div class='l_main'>
        <article id="post-Julia-For-Mushin"
  class="post white-box article-type-post"
  itemscope itemprop="blogPost">
	<section class='meta'>
	<h2 class="title">
  	<a href="/2018/11/19/Julia-For-Mushin/">
    	Julia for Mushin
    </a>
  </h2>
	<time>
	  Nov 19, 2018
	</time>
	
    
    <div class='cats'>
        <a href="/categories/plan/">plan</a>
    </div>

	</section>
	
		<section class="tog"></section>
	
	<section class="article typo">
  	<div class="article-entry" itemprop="articleBody">
    	<p>A plan to try out the <a href="https://julialang.org/" target="_blank" rel="noopener">Julia language</a>.</p>
<a id="more"></a>
<p>Three months ago, Version 1.0 of Julia was <a href="https://julialang.org/blog/2018/08/one-point-zero" target="_blank" rel="noopener">released</a>, marking the more-or-less maturing of this language, especially for the field of scientific computation. For Internet applications, some people say everything that can be done using Javascript will eventually be done using Javascript. I wonder if the same thing is true about Julia: In scientific computation, will everything that can be done using Julia eventually be done using Julia?</p>
<p>I am not wondering without a solid basis. Julia appears to be fast, maybe close to C, according to the <a href="https://julialang.org/benchmarks/" target="_blank" rel="noopener">official benchmark</a>. In the meanwhile, Julia is a dynamic language that is probably much easier to use than static languages like C. As the developer <a href="https://docs.julialang.org/en/v1/" target="_blank" rel="noopener">indicated</a>, Julia is developed in the hope to &#x201C;eliminate the performance trade-off and provide a single environment productive enough for prototyping and efficient enough for deploying performance-intensive applications&#x201D;.</p>
<p>I am particularly interested in a few features of Julia claimed by its developers: (1) Designed for parallelism and distributed computation; (2) Powerful type system where user-defined types are as fast and compact as built-ins; (3) Call C functions directly, without wrappers or special APIs. Item 1 indicates a certain level of automation in parallelizing the code. Item 2 indicates the efficient implementation of some computational techniques, such as automatic differentiation (AD). If that is true, a lot of troubles and pains in AD&#x2019;ing codes in C/C++/Fortran can be avoid. Item 3 could be a huge plus for a Cython user like me - I have been glueing C/C++ libraries using Python all the time. Nevertheless, if Julia is fast enough, maybe there is even no need for the acceleration using C/C++.</p>
<p>To try out and assess Julia, my short-term plan is to rewrite and expand the Python library <a href="https://smanist.github.io/2018/06/23/Multibody-short-range-interaction/">Mushin</a> that I developed earlier. The rewriting will be divided into the following steps/modules,</p>
<ol style="list-style-type: decimal">
<li>Basics I: The computation of the element internal force vectors and stiffness matrices; the assembly of the element vectors and matrices; the solution of the nonlinear system of static mechanics.</li>
<li>Basics II: The inclusion of mass terms and the capability for solving dynamic problems.</li>
<li>Parallelization using MPI.</li>
<li>Optimization: Development of the adjoint of the problem using AD techniques.</li>
<li>Uncertainty quantification (UQ) of the time response.</li>
</ol>
<p>Modules 2, 3 and 4 depend on Module 1 and are parallel to each other. Module 5 depends on Modules 1 and 2. There are a few questions to consider in the implementation of these modules:</p>
<ol style="list-style-type: decimal">
<li>How to implement sparse and distributed vectors and matrices? Would <a href="https://docs.julialang.org/en/v1/stdlib/SparseArrays" target="_blank" rel="noopener">SparseArrays</a> work?</li>
<li>More fundamentally, how to do large-scale linear algebra operations in Julia? Is there something that is AD-able and is like the <a href="https://www.mcs.anl.gov/petsc/" target="_blank" rel="noopener">PETSc</a> library for C?</li>
<li>How to solve a large scale nonlinear system? Would <a href="https://github.com/JuliaOpt/NLopt.jl" target="_blank" rel="noopener">NLopt</a> work?</li>
<li>How to AD the code? How would <a href="http://www.juliadiff.org/" target="_blank" rel="noopener">JuliaDiff</a> work?</li>
<li>Is it better to implement time integration manually, or directly use <a href="http://docs.juliadiffeq.org/" target="_blank" rel="noopener">DifferentialEquations</a>? What impact would be on the UQ applications?</li>
</ol>
<p>The ultimate goal of the short-term plan is to check if Julia is suitable for a computational library: fast, easy parallelization, easy AD and UQ. If everything works out, the long-term plan would be to develop a pure Julia library for general finite element analysis that is parallelized with AD and UQ capabilities enabled.</p>
<p>Finally a few notes on the basic aspects in AD. Start with <a href="https://en.wikipedia.org/wiki/Automatic_differentiation" target="_blank" rel="noopener">wiki</a>. Mathematically, forward and backward modes of AD are conceptually based on the tangent and dual vectors, respectively. There are basically two strategies for implementation: source code transformation (SCT) and operator overloading (OO). The AD results are usually compared with the <a href="https://blogs.mathworks.com/cleve/2013/10/14/complex-step-differentiation/" target="_blank" rel="noopener">complex step method</a>. There are a lot of resources on GitHub, for both SCT and OO.</p>
<p>Some references:</p>
<ol style="list-style-type: decimal">
<li><a href="www.autodiff.org">Website</a>, a collection of libraries for AD.</li>
<li><a href="https://alexey.radul.name/ideas/2013/introduction-to-automatic-differentiation/" target="_blank" rel="noopener">Introduction to AD</a>.</li>
<li><a href="https://epubs.siam.org/doi/book/10.1137/1.9780898717761" target="_blank" rel="noopener">Evaluating Derivatives, Griewank2008</a>.</li>
<li><a href="https://www.springer.com/us/book/9780387303031" target="_blank" rel="noopener">Numerical Optimization, Nocedal2006</a>, a chapter is devoted to derivative evaluation, also including coloring scheme.</li>
<li><a href="https://ieeexplore.ieee.org/document/6426534/" target="_blank" rel="noopener">Andersson2012</a>, the library CasADi is presented and eight &#x201C;flavors&#x201D; of AD are discussed.</li>
<li><a href="https://arc.aiaa.org/doi/abs/10.2514/1.J052184" target="_blank" rel="noopener">Martins2013</a>.</li>
</ol>

  	</div>
	  
	  <div class="article-tags tags">
      
        <a href="/tags/mechanics/">mechanics</a>
      
        <a href="/tags/julia/">julia</a>
      
        <a href="/tags/numerical/">numerical</a>
      
	  </div>
    
	</section>
	
		<section id="comments">
			<div id="disqus_thread"></div>
		</section>
	
</article>

      </div>
      <aside class='l_side'>
        
  <section class='m_widget about'>

<img class='avatar waves-image' src='/images/avatar.jpeg' />

<div class='header'>Smanist</div>
<div class='content'>
<div></div>
</div>
</section>

  <section class='m_widget categories'>
<div class='header'>Categories</div>
<div class='content'>
    
    <ul class="entry">
    
        <li><a class="flat-box" href="/categories/coding/"><div class='name'>coding</div><div class='badget'>14</div></a></li>
    
        <li><a class="flat-box" href="/categories/digest/"><div class='name'>digest</div><div class='badget'>15</div></a></li>
    
        <li><a class="flat-box" href="/categories/music/"><div class='name'>music</div><div class='badget'>1</div></a></li>
    
        <li><a class="flat-box" href="/categories/pieces/"><div class='name'>pieces</div><div class='badget'>10</div></a></li>
    
        <li><a class="flat-box" href="/categories/plan/"><div class='name'>plan</div><div class='badget'>3</div></a></li>
    
    </ul>
    
</div>
</section>

  
<div class="m_widget tagcloud">
    <div class="header">Tags</div>
    <div class='content'>
        <a href="/tags/alien/" style="font-size: 14px; color: #808080">alien</a> <a href="/tags/bayesian/" style="font-size: 14px; color: #808080">bayesian</a> <a href="/tags/career/" style="font-size: 18.5px; color: #202020">career</a> <a href="/tags/cas/" style="font-size: 14px; color: #808080">cas</a> <a href="/tags/chrome/" style="font-size: 14px; color: #808080">chrome</a> <a href="/tags/communication/" style="font-size: 14px; color: #808080">communication</a> <a href="/tags/conference/" style="font-size: 14px; color: #808080">conference</a> <a href="/tags/cpp/" style="font-size: 14px; color: #808080">cpp</a> <a href="/tags/emacs/" style="font-size: 17px; color: #404040">emacs</a> <a href="/tags/etymology/" style="font-size: 14px; color: #808080">etymology</a> <a href="/tags/faculty/" style="font-size: 17px; color: #404040">faculty</a> <a href="/tags/fonts/" style="font-size: 14px; color: #808080">fonts</a> <a href="/tags/food/" style="font-size: 18.5px; color: #202020">food</a> <a href="/tags/geology/" style="font-size: 14px; color: #808080">geology</a> <a href="/tags/glacier/" style="font-size: 14px; color: #808080">glacier</a> <a href="/tags/google/" style="font-size: 14px; color: #808080">google</a> <a href="/tags/hexo/" style="font-size: 18.5px; color: #202020">hexo</a> <a href="/tags/hg/" style="font-size: 14px; color: #808080">hg</a> <a href="/tags/history/" style="font-size: 15.5px; color: #606060">history</a> <a href="/tags/julia/" style="font-size: 15.5px; color: #606060">julia</a> <a href="/tags/katex/" style="font-size: 14px; color: #808080">katex</a> <a href="/tags/kriging/" style="font-size: 20px; color: #000">kriging</a> <a href="/tags/language-visualization/" style="font-size: 14px; color: #808080">language, visualization</a> <a href="/tags/latex/" style="font-size: 14px; color: #808080">latex</a> <a href="/tags/life/" style="font-size: 17px; color: #404040">life</a> <a href="/tags/lint/" style="font-size: 14px; color: #808080">lint</a> <a href="/tags/machine-learning/" style="font-size: 18.5px; color: #202020">machine learning</a> <a href="/tags/mathjax/" style="font-size: 14px; color: #808080">mathjax</a> <a href="/tags/maxima/" style="font-size: 14px; color: #808080">maxima</a> <a href="/tags/mechanics/" style="font-size: 18.5px; color: #202020">mechanics</a> <a href="/tags/multi-objective/" style="font-size: 14px; color: #808080">multi-objective</a> <a href="/tags/numerical/" style="font-size: 17px; color: #404040">numerical</a> <a href="/tags/optimization/" style="font-size: 17px; color: #404040">optimization</a> <a href="/tags/python/" style="font-size: 15.5px; color: #606060">python</a> <a href="/tags/rnn/" style="font-size: 14px; color: #808080">rnn</a> <a href="/tags/rosetta/" style="font-size: 15.5px; color: #606060">rosetta</a> <a href="/tags/shell/" style="font-size: 18.5px; color: #202020">shell</a> <a href="/tags/solver/" style="font-size: 14px; color: #808080">solver</a> <a href="/tags/ssh/" style="font-size: 14px; color: #808080">ssh</a> <a href="/tags/surrogate-model/" style="font-size: 20px; color: #000">surrogate model</a> <a href="/tags/symbols/" style="font-size: 14px; color: #808080">symbols</a> <a href="/tags/sympy/" style="font-size: 14px; color: #808080">sympy</a> <a href="/tags/the-pillows/" style="font-size: 14px; color: #808080">the pillows</a> <a href="/tags/time-series/" style="font-size: 14px; color: #808080">time series</a> <a href="/tags/wsl/" style="font-size: 17px; color: #404040">wsl</a> <a href="/tags/xming/" style="font-size: 15.5px; color: #606060">xming</a> <a href="/tags/zoology/" style="font-size: 18.5px; color: #202020">zoology</a>
    </div>
</div>



  <section class='m_widget friendly-links'>
<div class='header'>Links</div>
<div class='content'>
    <ul class="entry">
    
        <li><a class="flat-box" target="_blank" href="https://www.researchgate.net/profile/Daning_Huang">
            <div class='name'>My ResearchGate</div>
        </a></li>
    
        <li><a class="flat-box" target="_blank" href="https://www.linkedin.com/in/daning-huang-73058180/">
            <div class='name'>My LinkedIn</div>
        </a></li>
    
        <li><a class="flat-box" target="_blank" href="https://pswpswpsw.github.io">
            <div class='name'>Friend P</div>
        </a></li>
    
        <li><a class="flat-box" target="_blank" href="https://anish-lu-yihe.github.io">
            <div class='name'>Tomo L</div>
        </a></li>
    
        <li><a class="flat-box" target="_blank" href="https://ericzhng.github.io/">
            <div class='name'>Buddy Z</div>
        </a></li>
    
    </ul>
</div>
</section>

      </aside>
      <script>setLoadingBarProgress(60);</script>
    </div>
  </div>
  <footer id="footer" class="clearfix">

	<div class="social-wrapper">
  	
      
        <a href="https://github.com/smanist" class="social github"
          target="_blank" rel="external">
          <span class="icon icon-github"></span>
        </a>
      
        <a href="/atom.xml" class="social rss"
          target="_blank" rel="external">
          <span class="icon icon-rss"></span>
        </a>
      
    
  </div>
  
  <div>Theme derived from <a href='https://github.com/stkevintan/hexo-theme-material-flow' class="codename">MaterialFlow</a>, Banner figures from <a href='https://wall.alphacoders.com/' class="codename">WallpaperAbyss</a></div>
  
</footer>


  <script>setLoadingBarProgress(80);</script>
  
<script>
  var disqus_shortname = 'smanist';
  
  var disqus_url = 'http://smanist.github.io/2018/11/19/Julia-For-Mushin/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
<script src='//cdn.bootcss.com/node-waves/0.7.5/waves.min.js'></script>
<script src="//cdn.bootcss.com/scrollReveal.js/3.3.2/scrollreveal.min.js"></script>
<script src="/js/jquery.fitvids.js"></script>
<script>
	var GOOGLE_CUSTOM_SEARCH_API_KEY = "";
	var GOOGLE_CUSTOM_SEARCH_ENGINE_ID = "";
	var ALGOLIA_API_KEY = "";
	var ALGOLIA_APP_ID = "";
	var ALGOLIA_INDEX_NAME = "";
  var AZURE_SERVICE_NAME = "";
  var AZURE_INDEX_NAME = "";
  var AZURE_QUERY_KEY = "";
  var BAIDU_API_ID = "";
  var SEARCH_SERVICE = "hexo";
  var ROOT = "/"||"/";
  if(!ROOT.endsWith('/'))ROOT += '/';
</script>
<script src="/js/search.js"></script>
<script src="/js/app.js"></script>


  <script>setLoadingBarProgress(100);</script>
</body>
</html>
